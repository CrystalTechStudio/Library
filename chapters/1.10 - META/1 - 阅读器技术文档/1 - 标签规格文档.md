# 标签规格文档（TagsSpec.txt）
晶体图书馆允许作者给文章添加标签（Tag）。标签可以帮助查找或推荐文章。为了使标签更统一，晶体图书馆预先制定了一系列可能会用到的标签。所有标签，以及它们的定义都被写入了这个标签规格文档中。该文件位于项目根目录下。文件名是 `TagsSpec.txt`。

## 文件格式
该文件格式的设计目标是极度容易编写和理解。其解析器的源代码位于 `src/builder/tagsSpecParser.ts`。

下面描述一下该文件的详细格式：

### 每两个标签之间用一个空行隔开
例如：

```
.NET Framework

C#

VB
```

定义了三个标签：`.NET Framework`，`C#`，和`VB`。

## 在标签后使用中文括号（`（`，`）`）可添加用正斜杠（`/`）划分的标签变种
例如：

```
C#（Windows/.NET Framework）

VB（Windows）
```

定义了三个标签：

- 标签`C#`有两个变种：`C#（Windows）`，`C#（.NET Framework）`。
- 标签`VB`有一个变种：`VB（Windows）`。

## 在标签最后添加一个或多个中文感叹号（`！`）可以付给该标签优先级
感叹号越多，优先级越高。

高优先级的关键词会在计算相似度的时候采用更高的权重。同时，当在某些字数有限制的场合，高优先级的标签会优先展现。

例如：

```
C

VB！

C#（Windows/.NET Framework）！！
```

定义了三个标签：`C`，`VB`，和`C#`。其中C为标准优先度，VB为一级优先度，C#为二级优先度。

### 不用空行隔开的会变成该标签的解释
例如：

```
C#（Windows/.NET Framework）
C#是微软推出的一种基于.NET框架的、面向对象的高级编程语言。

VB（Windows）
Visual Basic是由微软公司开发的包含环境的事件驱动编程语言。
它源自于BASIC编程语言。
```

定义了两个标签：`C#`和`VB`。其中`C#`有一个解释项，`VB`有两个解释项。

### 解释项中可以用方括号插入对其他标签的引用
例如：

```
.NET Framework（Windows）
.NET框架是由微软开发，一个致力于敏捷软件开发、快速应用开发、平台无关性和网络透明化的软件框架。

C#（Windows/.NET Framework）
C#是微软推出的一种基于【.NET Framework】的、面向对象的高级编程语言。
```

其中`C#`的第一个解释项附带了一个`.NET Framework`的引用。

### 在解释项前写一个加号可以将该解释项内引用的标签设置为前置标签
例如：

```
.NET Framework（Windows）
.NET框架是由微软开发，一个致力于敏捷软件开发、快速应用开发、平台无关性和网络透明化的软件框架。

C#（Windows/.NET Framework）
C#是微软推出的一种基于.NET Framework的、面向对象的高级编程语言。
+需选择【.NET Framework】
```

其中`C#`的前置条件就是`.NET Framework`。

需要注意的是，如果本标签和前置标签都有变种，则只会依赖对应的变种。

例如：

```
.NET Framework（Windows）
.NET框架是由微软开发，一个致力于敏捷软件开发、快速应用开发、平台无关性和网络透明化的软件框架。

C#（Windows/.NET Framework）
C#是微软推出的一种基于.NET Framework的、面向对象的高级编程语言。
+需选择【.NET Framework】
```

在这个情况下，如果选择了`C#（Windows）`，则只需要选择前置`.NET Framework`的对应变种`.NET Framework（Windows）`。正是因此，如果一个标签和其前置都有变种的话，那么其变种必须是其前置变种的子集。当然，如果一个标签和它的前置其中任意一个没有变种的话，则没有这个限制。

### 在一个解释项前添加一个等号可以将该解释项变为用中文逗号（`，`）分隔的同义词列表
例如：

```
.NET Framework（Windows）
.NET框架是由微软开发，一个致力于敏捷软件开发、快速应用开发、平台无关性和网络透明化的软件框架。
=.NET框架，.NET
```

其中为`.NET Framework`这个标签添加了两个同义词：`.NET框架`和`.NET`。同时，`.NET框架，.NET`这一句话将不再作为`.NET Framework`的解释项。

**请注意：同义词仅使用于搜索时将用户输入的标签转换为晶体图书馆标签。同义词并不是真的标签。**
